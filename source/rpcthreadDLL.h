
#ifndef rpcthreadDLLH
#define rpcthreadDLLH

#include <Classes.hpp>

#include "winampinterface.h"    // header file generated by MIDL compiler
#include "ServerDLLF.h"         // WAExecutionStatus

// bring the Winamp interfaces
#include "WinampServerImpl.h"

#include "ICallObserver.h"

using namespace WinampRemote::Remoting;

class TRPCServerDLLThread : public TThread
{
private:
	HWND m_pluginhwnd;
	std::string m_protocolSequence;

protected:
    void __fastcall Execute();
public:
    __fastcall TRPCServerDLLThread(bool CreateSuspended, HWND mainhwnd, const char * protocolSequence);
    AnsiString Endpoint;
    static ICallObserver& CallObserver;
	void MainIdent(char * msgString);

};

extern TRPCServerDLLThread *serverThread;

#endif
